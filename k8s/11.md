# Task 1

## 2

```
PS D:\git\core-course-labs> kubectl create secret generic real-secret --from-literal=token=SECRET_VALUE
secret/real-secret created

PS D:\git\core-course-labs> kubectl describe secret real-secret
Name:         real-secret
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  Opaque

Data
====
token:  12 bytes

PS D:\git\core-course-labs> Write-Output ([System.Text.Encoding]::Utf8.GetString([System.Convert]::FromBase64String((kubectl get secret real-secret -o jsonpath='{.data.token}'))))
SECRET_VALUE
```

## 3

```
dyllas@DyllasDekWork:/mnt/d/git/core-course-labs/k8s/helm/app-python$ kubectl get po
NAME                          READY   STATUS    RESTARTS   AGE
app-python-74496b96dc-z472j   1/1     Running   0          99s

dyllas@DyllasDekWork:/mnt/d/git/core-course-labs/k8s/helm/app-python$ kubectl exec app-python-74496b96dc-z472j -- printenv | grep "SECRET"
SECRET=SECRET_VALUE
```

# Task 2

```
$ cat /vault/secrets/database-config.txt
SECRET:SECRET_VAULT
$ df -h
Filesystem      Size  Used Avail Use% Mounted on
overlay        1007G   13G  943G   2% /
tmpfs            64M     0   64M   0% /dev
tmpfs           8.4G  4.0K  8.4G   0% /vault/secrets
tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup
/dev/sde       1007G   13G  943G   2% /etc/hosts
shm              64M     0   64M   0% /dev/shm
tmpfs           128M   12K  128M   1% /run/secrets/kubernetes.io/serviceaccount
tmpfs           3.9G     0  3.9G   0% /proc/asound
tmpfs           3.9G     0  3.9G   0% /proc/acpi
tmpfs           3.9G     0  3.9G   0% /proc/scsi
tmpfs           3.9G     0  3.9G   0% /sys/firmware
```

# Bonus task

```
dyllas@DyllasDekWork:/mnt/d/git/core-course-labs/k8s/helm/app-python$ kubectl describe po app-python-844bdfdf5d-zjm6l
Name:             app-python-844bdfdf5d-zjm6l
Namespace:        default
Priority:         0
Service Account:  app-python
Node:             minikube/192.168.49.2
Start Time:       Wed, 15 Nov 2023 00:33:59 +0300
Labels:           TEST=check-custom-label
                  app.kubernetes.io/instance=app-python
                  app.kubernetes.io/managed-by=Helm
                  app.kubernetes.io/name=app-python
                  app.kubernetes.io/version=1.16.0
                  helm.sh/chart=app-python-0.1.0
                  pod-template-hash=844bdfdf5d
Annotations:      vault.hashicorp.com/agent-inject: true
                  vault.hashicorp.com/agent-inject-secret-database-config.txt: internal/data/database/config
                  vault.hashicorp.com/agent-inject-status: update
                  vault.hashicorp.com/agent-inject-template-database-config.txt:
                    {{- with secret "internal/data/database/config" -}}token_secret:{{ .Data.data.token }}{{- end -}}
                  vault.hashicorp.com/role: app-python
Status:           Running
IP:               10.244.0.8
IPs:
  IP:           10.244.0.8
Controlled By:  ReplicaSet/app-python-844bdfdf5d
Containers:
  app-python:
    Container ID:   docker://c3637d700b456f77fb9557a54d6b52b9c06b236eb79209b308302d69ecc83e3d
    Image:          dyllasdek/app_python:latest
    Image ID:       docker-pullable://dyllasdek/app_python@sha256:3d0c04a9c9a912b93224edb4b21399f3cc16cae25add3a73f4cf9b5a149dbb64
    Port:           5000/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 15 Nov 2023 00:34:00 +0300
    Ready:          True
    Restart Count:  0
    Limits:
      cpu:     100m
      memory:  128Mi
    Requests:
      cpu:      100m
      memory:   128Mi
    Liveness:   http-get http://:5000/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Readiness:  http-get http://:5000/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Environment:
      CUSTOM_SECRET:  SECRET-ONE
      SECRET:         <set to the key 'token' in secret 'real-secret'>  Optional: false
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-wr6jc (ro)
Conditions:
  Type              Status
  Initialized       True
  Ready             True
  ContainersReady   True
  PodScheduled      True
Volumes:
  kube-api-access-wr6jc:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   Guaranteed
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age                From               Message
  ----     ------     ----               ----               -------
  Normal   Scheduled  50s                default-scheduler  Successfully assigned default/app-python-844bdfdf5d-zjm6l to minikube
  Normal   Pulled     49s                kubelet            Container image "dyllasdek/app_python:latest" already present on machine
  Normal   Created    49s                kubelet            Created container app-python
  Normal   Started    49s                kubelet            Started container app-python
```

```
dyllas@DyllasDekWork:/mnt/d/git/core-course-labs/k8s/helm/app-python$ kubectl describe po app-kotlin-67bc4f7655-dbvlt
Name:             app-kotlin-67bc4f7655-dbvlt
Namespace:        default
Priority:         0
Service Account:  app-kotlin
Node:             minikube/192.168.49.2
Start Time:       Wed, 15 Nov 2023 00:53:42 +0300
Labels:           TEST=check-custom-label
                  app.kubernetes.io/instance=app-kotlin
                  app.kubernetes.io/managed-by=Helm
                  app.kubernetes.io/name=app-kotlin
                  app.kubernetes.io/version=1.16.0
                  helm.sh/chart=app-kotlin-0.1.0
                  pod-template-hash=67bc4f7655
Annotations:      <none>
Status:           Running
IP:               10.244.0.10
IPs:
  IP:           10.244.0.10
Controlled By:  ReplicaSet/app-kotlin-67bc4f7655
Containers:
  app-kotlin:
    Container ID:   docker://92f624fb9786eadb6910df73d14c5d2a528cd4e497e8f4684069b1f9f014846f
    Image:          dyllasdek/app_kotlin:latest
    Image ID:       docker-pullable://dyllasdek/app_kotlin@sha256:8818fe4076611494d2685f71a347f60bbb164ff1942e19f5a4a1a4c441ea3cdc
    Port:           8080/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 15 Nov 2023 00:53:44 +0300
    Ready:          False
    Restart Count:  0
    Limits:
      cpu:     100m
      memory:  128Mi
    Requests:
      cpu:      100m
      memory:   128Mi
    Liveness:   http-get http://:8080/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Readiness:  http-get http://:8080/ delay=0s timeout=1s period=10s #success=1 #failure=3
    Environment:
      KOTLIN_ENV:  SECRET-TWO
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-mz484 (ro)
Conditions:
  Type              Status
  Initialized       True
  Ready             False
  ContainersReady   False
  PodScheduled      True
Volumes:
  kube-api-access-mz484:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   Guaranteed
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age               From               Message
  ----     ------     ----              ----               -------
  Normal   Scheduled  16s               default-scheduler  Successfully assigned default/app-kotlin-67bc4f7655-dbvlt to minikube
  Normal   Pulled     15s               kubelet            Container image "dyllasdek/app_kotlin:latest" already present on machine
  Normal   Created    15s               kubelet            Created container app-kotlin
  Normal   Started    14s               kubelet            Started container app-kotlin
```
